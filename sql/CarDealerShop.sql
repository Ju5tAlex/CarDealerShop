-- MySQL Script generated by MySQL Workbench
-- Wed Nov 18 20:42:33 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`manager`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`manager` ;

CREATE TABLE IF NOT EXISTS `mydb`.`manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `first_name` VARCHAR(45) NOT NULL,
  `last_name` VARCHAR(45) NULL,
  `email` VARCHAR(45) NOT NULL,
  `phone_number` VARCHAR(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE,
  UNIQUE INDEX `phone_number_UNIQUE` (`phone_number` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`client`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`client` ;

CREATE TABLE IF NOT EXISTS `mydb`.`client` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `first_name` VARCHAR(45) NOT NULL,
  `last_name` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `phone_number` VARCHAR(11) NOT NULL,
  `manager_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE,
  UNIQUE INDEX `phone_number_UNIQUE` (`phone_number` ASC) VISIBLE,
  INDEX `fk_client_manager1_idx` (`manager_id` ASC) VISIBLE,
  CONSTRAINT `fk_client_manager1`
    FOREIGN KEY (`manager_id`)
    REFERENCES `mydb`.`manager` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`car`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`car` ;

CREATE TABLE IF NOT EXISTS `mydb`.`car` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `model_name` VARCHAR(45) NOT NULL,
  `price` INT NOT NULL,
  `engine_power` INT NOT NULL,
  `colour` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `model_name_UNIQUE` (`model_name` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`clients_cars`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`clients_cars` ;

CREATE TABLE IF NOT EXISTS `mydb`.`clients_cars` (
  `client_id` INT NOT NULL,
  `car_id` INT NOT NULL,
  PRIMARY KEY (`client_id`, `car_id`),
  INDEX `fk_client_has_car1_car1_idx` (`car_id` ASC) VISIBLE,
  INDEX `fk_client_has_car1_client1_idx` (`client_id` ASC) VISIBLE,
  CONSTRAINT `fk_client_has_car1_client1`
    FOREIGN KEY (`client_id`)
    REFERENCES `mydb`.`client` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_client_has_car1_car1`
    FOREIGN KEY (`car_id`)
    REFERENCES `mydb`.`car` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`manufacturer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`manufacturer` ;

CREATE TABLE IF NOT EXISTS `mydb`.`manufacturer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `country` VARCHAR(45) NULL,
  `city` VARCHAR(45) NULL,
  `index` INT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`part`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`part` ;

CREATE TABLE IF NOT EXISTS `mydb`.`part` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `description` VARCHAR(250) NOT NULL,
  `code` INT NOT NULL,
  `manufacturer_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC) VISIBLE,
  UNIQUE INDEX `code_UNIQUE` (`code` ASC) VISIBLE,
  INDEX `fk_part_manufacturer1_idx` (`manufacturer_id` ASC) VISIBLE,
  CONSTRAINT `fk_part_manufacturer1`
    FOREIGN KEY (`manufacturer_id`)
    REFERENCES `mydb`.`manufacturer` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`cars_parts`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`cars_parts` ;

CREATE TABLE IF NOT EXISTS `mydb`.`cars_parts` (
  `car_id` INT NOT NULL,
  `part_id` INT NOT NULL,
  PRIMARY KEY (`car_id`, `part_id`),
  INDEX `fk_car_has_part_part1_idx` (`part_id` ASC) VISIBLE,
  INDEX `fk_car_has_part_car1_idx` (`car_id` ASC) VISIBLE,
  CONSTRAINT `fk_car_has_part_car1`
    FOREIGN KEY (`car_id`)
    REFERENCES `mydb`.`car` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_car_has_part_part1`
    FOREIGN KEY (`part_id`)
    REFERENCES `mydb`.`part` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `mydb`.`manager`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`manager` (`id`, `first_name`, `last_name`, `email`, `phone_number`) VALUES (5, 'Tolya', 'Petrov', 'petrov_tolya@gamil.com', '89885674321');
INSERT INTO `mydb`.`manager` (`id`, `first_name`, `last_name`, `email`, `phone_number`) VALUES (6, 'Fedya', 'Lukinov', 'lukinov@gmail.com', '88003456532');
INSERT INTO `mydb`.`manager` (`id`, `first_name`, `last_name`, `email`, `phone_number`) VALUES (7, 'Dima', 'Leskov', 'leskov@gmail.com', '89214327854');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`client`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`client` (`id`, `first_name`, `last_name`, `email`, `phone_number`, `manager_id`) VALUES (1, 'Vasya', 'Pupkin', 'vasya1337@gmail.com', '88005553555', 5);
INSERT INTO `mydb`.`client` (`id`, `first_name`, `last_name`, `email`, `phone_number`, `manager_id`) VALUES (2, 'Pavel', 'Heng', 'heng@gmail.com', '89437654322', 6);
INSERT INTO `mydb`.`client` (`id`, `first_name`, `last_name`, `email`, `phone_number`, `manager_id`) VALUES (3, 'Donya', 'Flipper', 'flipper@gmail.com', '89114327684', 7);
INSERT INTO `mydb`.`client` (`id`, `first_name`, `last_name`, `email`, `phone_number`, `manager_id`) VALUES (4, 'Kira', 'Vatson', 'vatson@gmail.com', '82345674321', 7);
INSERT INTO `mydb`.`client` (`id`, `first_name`, `last_name`, `email`, `phone_number`, `manager_id`) VALUES (5, 'Limbo', 'Nobody', 'nobody@gmail.com', '89473458765', 5);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`car`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`car` (`id`, `model_name`, `price`, `engine_power`, `colour`) VALUES (43, 'Rapid', 32999, 150, 'red');
INSERT INTO `mydb`.`car` (`id`, `model_name`, `price`, `engine_power`, `colour`) VALUES (44, 'Viper', 14999, 100, 'green');
INSERT INTO `mydb`.`car` (`id`, `model_name`, `price`, `engine_power`, `colour`) VALUES (45, 'Ghost', 28999, 170, 'black');
INSERT INTO `mydb`.`car` (`id`, `model_name`, `price`, `engine_power`, `colour`) VALUES (46, 'Yeti', 7999, 58, 'white');
INSERT INTO `mydb`.`car` (`id`, `model_name`, `price`, `engine_power`, `colour`) VALUES (47, 'Bulk', 54999, 295, 'red');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`clients_cars`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (1, 43);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (2, 44);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (4, 45);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (3, 46);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (5, 47);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (5, 46);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (4, 46);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (1, 47);
INSERT INTO `mydb`.`clients_cars` (`client_id`, `car_id`) VALUES (2, 43);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`manufacturer`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`manufacturer` (`id`, `name`, `country`, `city`, `index`) VALUES (7, 'Mitsubusiness', 'Japan', 'Tokyo', 1934756);
INSERT INTO `mydb`.`manufacturer` (`id`, `name`, `country`, `city`, `index`) VALUES (8, 'General Rotors', 'USA', 'Detroit', 1236884);
INSERT INTO `mydb`.`manufacturer` (`id`, `name`, `country`, `city`, `index`) VALUES (9, 'BMV', 'Germany', 'Munich', 765994);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`part`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`part` (`id`, `name`, `description`, `code`, `manufacturer_id`) VALUES (2, 'Conditioner', 'Full Climate Control', 23245, 7);
INSERT INTO `mydb`.`part` (`id`, `name`, `description`, `code`, `manufacturer_id`) VALUES (3, 'Engine', 'A V8 engine is an eight-cylinder piston engine', 34533, 8);
INSERT INTO `mydb`.`part` (`id`, `name`, `description`, `code`, `manufacturer_id`) VALUES (4, 'Mirror', 'Rear-view mirror', 233343, 8);
INSERT INTO `mydb`.`part` (`id`, `name`, `description`, `code`, `manufacturer_id`) VALUES (5, 'Headlamp', 'Xenon lamp', 234211, 9);
INSERT INTO `mydb`.`part` (`id`, `name`, `description`, `code`, `manufacturer_id`) VALUES (6, 'Radiator grills', 'Full metal radiator grills', 123456, 9);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`cars_parts`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (43, 2);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (44, 2);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (47, 3);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (45, 4);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (43, 4);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (44, 5);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (44, 6);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (45, 6);
INSERT INTO `mydb`.`cars_parts` (`car_id`, `part_id`) VALUES (46, 6);

COMMIT;

